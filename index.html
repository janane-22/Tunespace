<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TuneSpace - Music Studio Booking</title>
    <meta name="description" content="Book premium music studios in Tamil Nadu. Professional recording spaces for musicians, bands, and artists.">
    <meta name="keywords" content="music studio, recording studio, Tamil Nadu, booking, musicians">
    
    <!-- Open Graph -->
    <meta property="og:title" content="TuneSpace - Music Studio Booking">
    <meta property="og:description" content="Book premium music studios in Tamil Nadu">
    <meta property="og:type" content="website">
    
    <!-- CSS -->
    <link rel="stylesheet" href="styles/main.css">
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-brand">
                <i data-lucide="music" class="nav-icon"></i>
                <span class="brand-text">TuneSpace</span>
            </div>
            
            <div class="nav-menu">
                <button class="nav-link" data-section="studios">Studios</button>
                <button class="nav-link bookings-link" data-section="bookings" style="display: none;">
                    <i data-lucide="calendar"></i>
                    My Bookings
                </button>
                <button class="nav-link admin-link" data-section="admin" style="display: none;">
                    <i data-lucide="settings"></i>
                    Admin
                </button>
            </div>
            
            <div class="nav-auth">
                <span class="user-welcome" style="display: none;"></span>
                <button class="btn btn-primary login-btn">
                    <i data-lucide="user"></i>
                    Login
                </button>
                <button class="btn btn-outline logout-btn" style="display: none;">
                    <i data-lucide="log-out"></i>
                    Logout
                </button>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main>
        <!-- Hero Section -->
        <section class="hero">
            <div class="hero-content">
                <div class="hero-text">
                    <h1>Professional Music Studio</h1>
                    <p>Book premium recording spaces equipped with state-of-the-art technology. Perfect for musicians, bands, podcasters, and audio professionals across Tamil Nadu.</p>
                    <button class="btn btn-primary btn-lg hero-cta">Get Started</button>
                </div>
                <div class="hero-image">
                    <img src="images/main.jpeg" alt="Professional music studio in Tamil Nadu" />
                </div>
            </div>
        </section>

        <!-- Studios Section -->
        <section class="studios" id="studios">
            <div class="section-container">
                <div class="section-header">
                    <h2>Choose Your Studio Class</h2>
                    <p>Select from our range of professional studios, each designed to meet different needs and budgets</p>
                </div>
                
                <div class="studio-grid">
                    <!-- 1st Class Studio -->
                    <div class="studio-card" data-class="1st">
                        <div class="studio-image">
                            <img src="images/first.jpeg" alt="1st Class Music Studio" />
                            <div class="studio-badge premium">Premium</div>
                        </div>
                        <div class="studio-content">
                            <h3>1st Class Studio</h3>
                            <div class="studio-price">₹1,500<span>/hour</span></div>
                            <ul class="studio-features">
                                <li><i data-lucide="check"></i> Professional mixing console</li>
                                <li><i data-lucide="check"></i> Vintage microphones collection</li>
                                <li><i data-lucide="check"></i> Acoustic treatment</li>
                                <li><i data-lucide="check"></i> Live room + control room</li>
                                <li><i data-lucide="check"></i> Up to 10 people</li>
                            </ul>
                            <button class="btn btn-primary book-btn" data-studio="1st" data-name="1st Class Studio" data-price="1500" data-capacity="10">
                                Book Now
                            </button>
                        </div>
                    </div>

                    <!-- 2nd Class Studio -->
                    <div class="studio-card" data-class="2nd">
                        <div class="studio-image">
                            <img src="images/second.jpg" alt="2nd Class Music Studio" />
                            <div class="studio-badge popular">Most Popular</div>
                        </div>
                        <div class="studio-content">
                            <h3>2nd Class Studio</h3>
                            <div class="studio-price">₹800<span>/hour</span></div>
                            <ul class="studio-features">
                                <li><i data-lucide="check"></i> Digital mixing board</li>
                                <li><i data-lucide="check"></i> Quality microphones</li>
                                <li><i data-lucide="check"></i> Sound isolation</li>
                                <li><i data-lucide="check"></i> Recording + monitoring</li>
                                <li><i data-lucide="check"></i> Up to 6 people</li>
                            </ul>
                            <button class="btn btn-primary book-btn" data-studio="2nd" data-name="2nd Class Studio" data-price="800" data-capacity="6">
                                Book Now
                            </button>
                        </div>
                    </div>

                    <!-- 3rd Class Studio -->
                    <div class="studio-card" data-class="3rd">
                        <div class="studio-image">
                            <img src="images/third.JPG" alt="3rd Class Music Studio" />
                            <div class="studio-badge budget">Budget Friendly</div>
                        </div>
                        <div class="studio-content">
                            <h3>3rd Class Studio</h3>
                            <div class="studio-price">₹500<span>/hour</span></div>
                            <ul class="studio-features">
                                <li><i data-lucide="check"></i> Basic mixing setup</li>
                                <li><i data-lucide="check"></i> Standard microphones</li>
                                <li><i data-lucide="check"></i> Basic acoustics</li>
                                <li><i data-lucide="check"></i> Recording space</li>
                                <li><i data-lucide="check"></i> Up to 4 people</li>
                            </ul>
                            <button class="btn btn-primary book-btn" data-studio="3rd" data-name="3rd Class Studio" data-price="500" data-capacity="4">
                                Book Now
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Auth Modal -->
    <div class="modal" id="authModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="authTitle">Login to TuneSpace</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <!-- Login Form -->
                <form id="loginForm" class="auth-form">
                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" id="loginEmail" required>
                    </div>
                    <div class="form-group">
                        <label>Password</label>
                        <input type="password" id="loginPassword" required>
                    </div>
                    <div class="form-group">
                        <label>Role</label>
                        <select id="loginRole">
                            <option value="user">User</option>
                            <option value="admin">Admin</option>
                        </select>
                    </div>
                    <button type="submit" class="btn btn-primary btn-full">Login</button>
                </form>

                <!-- Register Form -->
                <form id="registerForm" class="auth-form" style="display: none;">
                    <div class="form-group">
                        <label>Full Name</label>
                        <input type="text" id="registerName" required>
                    </div>
                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" id="registerEmail" required>
                    </div>
                    <div class="form-group">
                        <label>Password</label>
                        <input type="password" id="registerPassword" required>
                    </div>
                    <div class="form-group">
                        <label>Role</label>
                        <select id="registerRole">
                            <option value="user">User</option>
                            <option value="admin">Admin</option>
                        </select>
                    </div>
                    <button type="submit" class="btn btn-primary btn-full">Register</button>
                </form>
            </div>
            <div class="modal-footer">
                <p class="auth-switch">
                    <span id="authSwitchText">Don't have an account?</span>
                    <button type="button" id="authSwitchBtn" class="link-btn">Register here</button>
                </p>
            </div>
        </div>
    </div>

    <!-- Booking Modal -->
    <div class="modal" id="bookingModal">
        <div class="modal-content modal-lg">
            <div class="modal-header">
                <h3 id="bookingTitle">Book Studio</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <form id="bookingForm">
                    <div class="booking-info">
                        <h4 id="selectedStudioName"></h4>
                        <p id="selectedStudioPrice"></p>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label>Date</label>
                            <input type="date" id="bookingDate" required>
                        </div>
                        <div class="form-group">
                            <label>Start Time</label>
                            <select id="startTime" required>
                                <option value="">Select time</option>
                                <option value="09:00">09:00 AM</option>
                                <option value="10:00">10:00 AM</option>
                                <option value="11:00">11:00 AM</option>
                                <option value="12:00">12:00 PM</option>
                                <option value="13:00">01:00 PM</option>
                                <option value="14:00">02:00 PM</option>
                                <option value="15:00">03:00 PM</option>
                                <option value="16:00">04:00 PM</option>
                                <option value="17:00">05:00 PM</option>
                                <option value="18:00">06:00 PM</option>
                                <option value="19:00">07:00 PM</option>
                                <option value="20:00">08:00 PM</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Duration (hours)</label>
                            <select id="duration" required>
                                <option value="">Select duration</option>
                                <option value="1">1 hour</option>
                                <option value="2">2 hours</option>
                                <option value="3">3 hours</option>
                                <option value="4">4 hours</option>
                                <option value="6">6 hours</option>
                                <option value="8">8 hours</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Purpose</label>
                        <select id="purpose" required>
                            <option value="">Select purpose</option>
                            <option value="recording">Music Recording</option>
                            <option value="podcast">Podcast Recording</option>
                            <option value="mixing">Mixing & Mastering</option>
                            <option value="rehearsal">Band Rehearsal</option>
                            <option value="other">Other</option>
                        </select>
                    </div>

                    <div class="cost-summary">
                        <div class="cost-row">
                            <span>Hourly Rate:</span>
                            <span id="hourlyRate">₹0</span>
                        </div>
                        <div class="cost-row">
                            <span>Duration:</span>
                            <span id="durationDisplay">0 hours</span>
                        </div>
                        <div class="cost-row total">
                            <span>Total Cost:</span>
                            <span id="totalCost">₹0</span>
                        </div>
                    </div>

                    <button type="submit" class="btn btn-primary btn-full">Confirm Booking</button>
                </form>
            </div>
        </div>
    </div>

    <!-- Receipt Modal -->
    <div class="modal" id="receiptModal">
        <div class="modal-content modal-lg">
            <div class="modal-header">
                <h3>Booking Confirmation</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="receipt" id="receiptContent">
                    <div class="receipt-header">
                        <h2>TuneSpace</h2>
                        <p>Music Studio Booking Receipt</p>
                    </div>
                    
                    <div class="receipt-details">
                        <div class="detail-row">
                            <span class="label">Booking ID:</span>
                            <span class="value" id="receiptBookingId"></span>
                        </div>
                        <div class="detail-row">
                            <span class="label">Studio:</span>
                            <span class="value" id="receiptStudio"></span>
                        </div>
                        <div class="detail-row">
                            <span class="label">Date:</span>
                            <span class="value" id="receiptDate"></span>
                        </div>
                        <div class="detail-row">
                            <span class="label">Time:</span>
                            <span class="value" id="receiptTime"></span>
                        </div>
                        <div class="detail-row">
                            <span class="label">Duration:</span>
                            <span class="value" id="receiptDuration"></span>
                        </div>
                        <div class="detail-row">
                            <span class="label">Purpose:</span>
                            <span class="value" id="receiptPurpose"></span>
                        </div>
                        <div class="detail-row total">
                            <span class="label">Total Amount:</span>
                            <span class="value" id="receiptTotal"></span>
                        </div>
                    </div>
                    
                    <div class="receipt-footer">
                        <p>Booking confirmed! Please arrive 10 minutes before your session.</p>
                        <p>Contact: +91-XXXX-XXXXXX | Email: info@tunespace.com</p>
                    </div>
                </div>
                
                <div class="receipt-actions">
                    <button class="btn btn-outline" id="downloadReceipt">
                        <i data-lucide="download"></i>
                        Download Receipt
                    </button>
                    <button class="btn btn-primary" onclick="closeModal('receiptModal')">Close</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Notifications -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- JavaScript -->
    <script src="js/components.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/booking.js"></script>
    <script src="js/app.js"></script>
    <!-- Your HTML content here -->

     <script>
        
  // Global variable to hold the selected studio ID
  window.selectedStudioId = null;

  // When a Book Now button is clicked, set the selected studio ID globally and update modal info
  document.querySelectorAll('.book-btn').forEach(btn => {
    btn.addEventListener('click', function () {
      // Set global selected studio ID from data attribute
      window.selectedStudioId = this.getAttribute('data-studio') || '1';

      // Update modal fields with name and price
      const studioName = this.getAttribute('data-name') || '';
      const studioPrice = this.getAttribute('data-price') || '0';

      document.getElementById('selectedStudioName').textContent = studioName;
      document.getElementById('selectedStudioPrice').textContent = `₹${parseFloat(studioPrice).toFixed(2)} per hour`;
      document.getElementById('hourlyRate').textContent = `₹${parseFloat(studioPrice).toFixed(2)}`;

      document.getElementById('durationDisplay').textContent = "0 hours";
      document.getElementById('totalCost').textContent = "₹0.00";

      // Show the booking modal (adjust depending on your modal CSS)
      const bookingModal = document.getElementById('bookingModal');
      if (bookingModal) {
        bookingModal.style.display = 'block';
      }

      // Reset duration selector
      const durationSelect = document.getElementById('duration');
      if (durationSelect) {
        durationSelect.value = '';
      }
    });
  });

  // Update total cost whenever the duration changes
  document.getElementById('duration').addEventListener('change', function () {
    const duration = +this.value;
    let hourlyText = document.getElementById('hourlyRate').textContent;
    hourlyText = hourlyText.replace(/₹|,/g, '').trim();
    const hourlyRate = parseFloat(hourlyText) || 0;

    document.getElementById('durationDisplay').textContent = `${duration} hours`;
    const total = duration * hourlyRate;
    document.getElementById('totalCost').textContent = `₹${total.toFixed(2)}`;
  });

  // Handle booking form submission
  document.getElementById('bookingForm').addEventListener('submit', function (event) {
    event.preventDefault();

    // Use the globally set selected studio ID
    const studioId = window.selectedStudioId || '1';

    // Use a fixed user ID here for testing (replace with real user ID after login integration)
    // const userId = '1';
    const userId = window.authManager?.getCurrentUser()?.id || '1';


    const date = document.getElementById('bookingDate').value;
    const startTime = document.getElementById('startTime').value;
    const duration = document.getElementById('duration').value;
    const purpose = document.getElementById('purpose').value;

    fetch('http://127.0.0.1:5000/bookings', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        studio_id: studioId,
        user_id: userId,
        date: date,
        start_time: startTime,
        duration: duration,
        purpose: purpose
      })
    })
      .then(res => res.json())
      .then(response => {
        if (response.success) {
          alert('Booking saved!');
          // Optionally close modal or reset form here
          const bookingModal = document.getElementById('bookingModal');
          if (bookingModal) {
            bookingModal.style.display = 'none';
          }
        } else {
          alert('Booking failed');
        }
      })
      .catch(error => {
        console.error('Booking error:', error);
        alert('Error submitting booking');
      });
  });
</script>
<footer class="site-footer">
  <div class="footer-container">
    <div class="footer-left">
      <h3>TuneSpace</h3>
      <p>Premium Music Studio Booking </p>
      <p>© 2025 TuneSpace. All rights reserved.</p>
    </div>

    <div class="footer-right">
      <h4>Contact Us</h4>
      <p>Email: <a href="mailto:info@tunespace.com">info@tunespace.com</a></p>
      <p>Phone: +91-7336582531</p>
      <p>Address: Trichy, Tamil Nadu, India</p>
    </div>
  </div>
</footer>

<style>
  .site-footer {
    background-color: #222;
    color: #ddd;
    padding: 20px 0;
    font-size: 0.9rem;
  }
  .footer-container {
    width: 90%;
    max-width: 1100px;
    margin: 0 auto;
    display: flex;
    justify-content: space-between;
    flex-wrap: wrap;
  }
  .footer-left h3 {
    margin-bottom: 8px;
  }
  .footer-right h4 {
    margin-bottom: 8px;
  }
  .footer-left p, .footer-right p {
    margin: 2px 0;
  }
  .footer-right a {
    color: #ddd;
    text-decoration: underline;
  }
  .footer-right a:hover {
    color: #fff;
  }
  @media (max-width: 600px) {
    .footer-container {
      flex-direction: column;
      align-items: center;
      text-align: center;
    }
    .footer-left, .footer-right {
      margin-bottom: 15px;
    }
  }
</style>
<script>
// Add this anywhere in your main <script> or after DOMContentLoaded
document.querySelectorAll('.modal-close').forEach(function(btn) {
    btn.addEventListener('click', function() {
        const modal = btn.closest('.modal');
        if (modal) modal.style.display = 'none';
    });
});
</script>



</body>
</html>